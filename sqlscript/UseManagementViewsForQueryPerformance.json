{
	"name": "UseManagementViews",
	"properties": {
		"content": {
			"query": "-- Other Active Connections\nSELECT * FROM sys.dm_pdw_exec_sessions where status <> 'Closed' and session_id <> session_id();\n\n-- Monitor active queries\nSELECT *\nFROM sys.dm_pdw_exec_requests\nWHERE status not in ('Completed','Failed','Cancelled')\n  AND session_id <> session_id()\nORDER BY submit_time DESC;\n\n-- Find top 10 queries longest running queries\nSELECT TOP 10 *\nFROM sys.dm_pdw_exec_requests\nORDER BY total_elapsed_time DESC;\n\n-- Find running queries\nSELECT *\nFROM sys.dm_pdw_exec_requests\nWHERE [status] = 'Running';\n\n-- Query with Label\nSELECT *\nFROM sys.tables\nOPTION (LABEL = 'My Query')\n;\n\n-- Find a query with the Label 'My Query'\nSELECT  *\nFROM    sys.dm_pdw_exec_requests\nWHERE   [label] = 'My Query';\n\n-- Find the distributed query plan steps for a specific query.\nSELECT * FROM sys.dm_pdw_request_steps\nWHERE request_id = 'QID432'\nORDER BY step_index;\n\n-- Find the distribution run times for a SQL step.\nSELECT * FROM sys.dm_pdw_sql_requests\nWHERE request_id = 'QID432' AND step_index = 0;\n\n-- When the query step is running, find the SQL Server execution plan for a query running on a specific SQL pool or control node.\n-- Replace distribution_id and spid with values from previous query.\nDBCC PDW_SHOWEXECUTIONPLAN(-1, 2141);\n\n-- Find information about all the workers completing a Data Movement Step.\n-- Check the total_elapsed_time column to see if a particular distribution is taking longer than others for data movement.\n-- For the long-running distribution, check the rows_processed column to see if the number of rows being moved from that \n-- distribution is larger than others. If so, this finding might indicate skew of your underlying data. One cause for data \n-- skew is distributing on a column with many NULL values (whose rows will all land in the same distribution). Prevent slow \n-- queries by avoiding distribution on these types of columns or filtering your query to eliminate NULLs when possible.\n-- Replace request_id and step_index with values from Step 1 and 3.\nSELECT * FROM sys.dm_pdw_dms_workers\nWHERE request_id = 'QID432' AND step_index = 0;",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "SQLPool01",
				"poolName": "SQLPool01"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}